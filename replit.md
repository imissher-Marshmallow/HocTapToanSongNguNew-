# Overview

This is an AI-powered educational platform for middle school students (THCS) focused on Math and English learning. The application provides personalized quiz experiences with AI-driven analysis, feedback, and learning recommendations. Students take quizzes, receive detailed performance analysis including weak areas and strengths, and get personalized 3-day study plans generated by AI.

The platform is bilingual (English/Vietnamese) and features an engaging, modern UI with animations and visual progress tracking through charts.

## Recent Changes (November 2025)

**Migrated from Vercel to Replit:**
- Configured frontend (React) to run on port 5000 with host binding to 0.0.0.0 for Replit compatibility
- Configured backend (Express) to run on port 3000 with host binding to 0.0.0.0
- Updated all npm scripts to use correct port configurations
- Set up Replit workflow to run both frontend and backend concurrently using concurrently package
- Configured OpenAI API key through Replit Secrets for secure environment variable management
- Application now runs successfully on Replit with proper client-server separation

# User Preferences

Preferred communication style: Simple, everyday language.

# System Architecture

## Frontend Architecture

**Technology Stack:**
- React 19.2.0 with Create React App
- React Router DOM 7.9.5 for client-side routing
- Framer Motion 12.23.24 for animations
- Chart.js 4.5.1 with react-chartjs-2 for data visualization
- Lucide React for icons
- Custom CSS with responsive design

**Key Design Patterns:**
- Context API for state management (LanguageContext for i18n)
- Component-based architecture with reusable UI components
- Route-based code splitting (LandingPage, QuizList, QuizPage, ResultPage)
- Translation files organized by feature (landingTranslations, navTranslations, quizTranslations, quizListTranslations)

**Rationale:** Create React App provides a zero-config starting point suitable for educational projects. React Router enables SPA navigation while Chart.js provides accessible data visualization for student performance metrics.

## Backend Architecture

**Technology Stack:**
- Express 4.21.1 (local development) / Express 5.1.0 (root)
- Node.js serverless functions (Vercel deployment)
- OpenAI API 4.76.0 for AI-powered analysis
- File-based data storage (JSON files)

**Key Design Patterns:**
- RESTful API design with `/api` prefix
- Hybrid deployment: Express server for local dev, serverless functions for production
- Environment-based configuration with dotenv
- Fallback mechanisms when OpenAI API key is unavailable

**Deployment Strategy:**
The application currently runs on Replit with the following configuration:
1. **Development (Replit):** Express server on port 3000 (backend) with React dev server on port 5000 (frontend)
   - Both services bind to 0.0.0.0 for network accessibility
   - Frontend proxies API requests to backend via proxy configuration
   - Concurrently runs both services simultaneously via `npm run dev`
2. **Legacy (Vercel):** Static React build served from `stem-project/build` with serverless API endpoints in `/api` directory (configuration files retained)

**Rationale:** The Replit setup provides a simpler development experience with both frontend and backend running together, making it easier to test and develop features end-to-end.

## Data Architecture

**Question Management:**
- Questions stored in JSON format (`questions_updated.json`)
- Support for multiple contest formats (array-based and object-based)
- Questions grouped by topic with difficulty levels (1-3)
- Bilingual support (Vietnamese primary, English translations)

**Quiz Analysis Structure:**
- Score calculation (out of 10)
- Weak areas identification with severity levels (high/medium/low)
- Feedback provided only for incorrect answers
- AI-generated recommendations with topics and next question suggestions
- Time tracking per question for performance analysis

**Rationale:** File-based JSON storage is simple and suitable for read-heavy educational content. The structure supports future migration to a database without major refactoring.

## AI Integration

**OpenAI Integration:**
- Used for quiz analysis and personalized feedback generation
- Generates 3-day study plans based on performance
- Provides topic-specific recommendations
- Graceful degradation with stub responses when API key unavailable

**Analysis Flow:**
1. Student submits quiz answers with time spent per question
2. Backend analyzer compares answers against correct solutions
3. AI analyzes patterns in wrong answers and time data
4. System generates personalized feedback, weak areas, and study recommendations
5. Results displayed with charts and actionable insights

**Rationale:** OpenAI enables personalized, natural language feedback that adapts to individual student performance patterns, providing more value than static pre-written responses.

# External Dependencies

## Third-Party APIs

**OpenAI API (v4.76.0):**
- Purpose: Generate personalized quiz analysis, feedback, and learning recommendations
- Configuration: Requires `OPENAI_API_KEY` environment variable
- Fallback: System provides stub responses if API key not configured
- Usage: Serverless functions and Express routes call analyzer.js which interfaces with OpenAI

## Cloud Services

**Replit (Current):**
- Purpose: Development and hosting platform
- Configuration: Workflow set up to run `npm run dev` which starts both frontend and backend
- Port configuration: Frontend on 5000 (webview), Backend on 3000 (internal)
- Environment variables: `OPENAI_API_KEY` configured via Replit Secrets
- Network binding: All services bind to 0.0.0.0 for proper Replit compatibility

**Vercel (Legacy):**
- Configuration files retained (`vercel.json`)
- Can be used as alternative deployment target if needed
- Requires serverless function configuration for API endpoints

**Netlify (Alternative):**
- Configuration files present (`.netlify/state.json`)
- May require separate configuration for API endpoints if used

## Frontend Libraries

**React Ecosystem:**
- React Router DOM: Client-side routing and navigation
- Chart.js + react-chartjs-2: Performance visualization (pie charts for weak areas)
- Framer Motion: UI animations and transitions
- Lucide React: Icon library

**Rationale:** These libraries are industry-standard, well-maintained, and provide the interactive, animated experience expected in modern educational platforms.

## Development Tools

**Concurrently (8.2.0):**
- Purpose: Run frontend and backend servers simultaneously during development
- Usage: `npm run dev` script in root package.json
- Simplifies developer workflow by managing multiple processes

**CORS (2.8.5):**
- Purpose: Enable cross-origin requests during local development
- Required for React dev server (port 5000) to communicate with Express backend (port 3000)

## Build and Development

**Development Setup:**
- Monorepo structure with root-level scripts
- Nested package.json files (root, stem-project, stem-project/backend)
- Proxy configuration in stem-project/package.json forwards `/api` requests to backend
- Environment variables managed through .env files

**Production Build:**
- `npm run build` creates optimized React production bundle
- Vercel builds via `@vercel/static-build` and `@vercel/node` builders
- Serverless functions bundled automatically by Vercel